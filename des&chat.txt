===================================================
Description
===================================================
There is an existing technology that is comprised of a Weight Indicator (WI) that is connected to a Raspberry Pi 4 via serial RS232. The WI outputs weight information via RS232 once every ~100ms. The core technology objective is for the Pi to capture the weight information of an object on a scale (that is connected to the WI) in real-time and display it in both barcode and numerical format. These core objectives have already been completed and all the code already exists in Python and is working.

The only remaining pieces that this job entails are:

- Redo the UI in QT Designer (from Tkinter). I have the desired end-state developed in XD with all asset files available.
- Code business logic for which I already have a full DFD (Data Flow Diagram) for with details.
- Create a method to take the last MySQL database entry and translate it into an API call to a REST HTTPS API end-point.

A few more mention-worthy notes:
- I am an IT Infrastructure Engineer myself, so I know how to make your job easy.
- I have a full DEV sandbox setup with VPN access to the RPI as well as from RPI to API end-point
- This project has massive potential and this coding requirement only represents v1.0 of this product that will be piloted at a *very* large Canadian organization. After a successful pilot, there will be a very large purchase order and I anticipate there will be many revisions of this.
- I am very open to a long term mutually beneficial partnership where trust in one another is paramount.
- I promise I will take care of you if you take care of me.
- My preference is an arrangement with moderate (but fair) immediate compensation with the promise of near-future high remuneration upon the success of the pilot. This is legit and has a pilot purchase order from the very large client that I will share with the right candidate.
- Catch is: I need this all done in 10 days (or less)!



===================================================
Chat
===================================================
Milos, Kako si?
My wife is from U≈æice!
Thank you for reaching out. I hope this note finds you and your family well and safe.
S
Let me know when you have time to chat about this project.
Hello. I'm Milos.
Very nice to meet you.
I have experience with RPI + QT already.
I'm available here 9pm(gmt+2)
Are you around?
S
I am, sir!
I'm here.
Should I work in VPS.
Sorry, Milos... Give me a few minutes... things are a little crazy at the moment... phones ringing, pregnant Serbian wife.....
S
You gonna be around in about 15mins?
yes. no problem.
tyt.
S
I will make an espresso and be right back.
ok.
I'm just called, be back in 10 mins.
sorry.
All good. I am here and available when you are.
In the meantime, here's an XD link to what I had in mind for the UI to be done in QT:
https://xd.adobe.com/view/b2fd38f8-5843-4fc4-746e-be3299390eaa-c4cc/
Here's the DFD:

DFD_v6.pdf
This DFD represents desired end-state.
This is what has already been completed in Python and Tkinter:

Initial_Version_Completed.zip
S
I propose that you TeamViewer into my RPI prototype and I demo you what I already have and you can scan the existing code and then tell me what you think and we go from there. How does that sound?
Hi. I'm back.
let me check.
ok.
I can teamviewer now.
ID: 1 393 445 552
Password: shlivo
let me know when you're in
I see you
So this is what exists now in Python / Tkintr
Disregard Combined
Core functionality is here
So, I have a Weight Indicator that is normally connected to load cells, but is now connection to a potentiometer to simulate the analog signal that is weight
my old fashioned LED indicated has 600 KG on it as my pot is set to that too
S
Now its 1501KGs
yes
Now it's 3002
You get the idea...
That Active Truck ID in the top left is a configurable parameter and is composed of the hostname with a "WP-" prefixed.
ie... if I accepted this change, the hostname would be changed to WP-TESTING123
All the weight data gets stored in a local MySQL DB
and these buttons here are pretty self explanatory
S
the keep / clear data refers to what happens in the db
yes.
the .csv files are a result of exports done
S
all make sense so far?
why do you want convert to qt?
Because what you see here is a very generic...
Call this v1 - generic.
What we're working on now is v2 - customized
and v2 customized is for a very big Canadian freight company that has a TMS (similar to ERP for trucking industry) that we have to integrate with via API
and the UI must be as little operator inputs as possible.
S
Have you seen the XD?
Yes.
so, when API info is exchanged, the interface gets updated.
S
And, we need a modern look and feel, hence QT.
I see.
S
Unless you have other ideas... I"m not totally locked into QT, in fact for commercial purposes there is licencing issues, so if you know of something that will result in a similar UI/UX that can integrate with Python and maybe C++ in the future, then I open to your inputs.
It is possible to use PyQt, I think, so you can keep python code, and make ui with QT.
but it's better to use c++ with QT, and python is only for inputs.
S
So, you're thinking C++, Python and QT?
yes, that is possible.
but I'm not sure what we are going to do without checking python code.
At this point, I would like to keep things as simple as possible. Here is the situation; I have purchase order for 5 units from a very large freight company and if this does what they want want it to (which I know it will), then there will be a purchase order work approx. 600k USD in the next 60 days. We'll call this v3 or this project.
v4 of the project will be more of a generic version of this without API integration that we will mass produce. My company owns patents on the scale technology, the only missing part is this.
S
Are you still looking at TV?
no.
Let me know when you are looking
S
or if you're still interested
Yes.
S
OK - see this version that is up right now?
yes.
S
This was a version in between the first one we saw and what we want this one to be.
ok.
The client wants as little operator inteaction as possible.
This device will be mounted on forklifts.
That's just debug information the previous developer was echo'ing to console
S
The freelancer I was working with from here was from India (West Bengal) and he can't continue because he is in a complete lockdown quarantine state in no access to technology. I very much liked working with him and he's a good and smart guy, but it's just impossible for him to continue now because of corona.
all inputs contain 'M' suffix?
only ones with M suffix should be used.... the indicator only outputs the M once the weight has been stablized.
S
I also have full API documentation I can send you.
ok, good.
As well as other important information from a business context.
And the RPI has an IPSEC tunnel to the client's infrastructure
S
I have allot more information I can send you along with VPN access to my infrastructure so you can get full host access to the RPI using putty/VNC/WinSCP, etc... and I have Windows and Debian VMs you can connect to as well.
ok.
so this all have to be done in 10 days?
Yes but backend code already exists for the RS232/Python end of things as well as other functionality.
S
I can send you the existing code.
ok, but I don't work weekends in usual.
S
Well, first things first; do you think you can get it done in 10 days?
yes.
Let me know your exact deadline.
Rough estimate of cost?
S
I would need the logic and API stuff tested before the UI/UX end of things because the client needs to see progress there soon.
UI/UX is no problem.
it can be done in 3 days enough.
So, UI/UX and API tested by 27th.
S
Doable?
30th.
30th cutting it too close. I have to physically deploy on the 2nd and we need buffer to remediate things in case there are issues.
Estimate in cost? (keeping in mind that there will be BIG $$ with success of this and I want a long term partnership).
S
I make sure I take care of those who take care of me.
me too.
and would you pay hourly?
whatever works best for you. you can quote me on this as a job or hourly, or whatever you feel most comfortable with.
S
For me, honesty and trust and the most important things. All we have is our word.
S
I want you to pay hourly. and I'm also honest.



=================================================
skype
=================================================
Steve, 11:36 PM
(wave)

Steve, 11:36 PM
Hello!

micky, 11:37 PM
I'm here.

micky, 11:37 PM
This is Milos.

Steve, 11:37 PM
This is Steve. Good to 'meet' you :-)

micky, 11:38 PM
Me too.

Steve, 11:39 PM
Would you like to 'meet' via Skype video call for a few minutes?

micky, 11:40 PM
It's possible only voice call. no camera. :(

Steve, 11:41 PM
that works... frankly, I need a break from typing!!

Steve, 11:41 PM
Give me a call when you're back.

micky, 11:41 PM
yes.

micky, 11:42 PM
let me check your code.

micky, 11:42 PM
and have a call.

micky, 11:42 PM
ok?

Steve, 11:42 PM
deal

Steve, 11:42 PM
this is the first version of the app you saw.

micky, 11:43 PM
yes.

micky, 11:43 PM
and second version?

Steve, 11:45 PM
I think the 2nd version was done in QT too.

micky, 11:46 PM
ok.

Steve, 11:46 PM
And it's more advanced and incorporates a library for what will be v4 of this which will be a generic device (no API integration) that will be massed produced.

Steve, 11:47 PM
basically, it eleminates the external indicator and makes the RPI an indicator itself

micky, 11:47 PM
ok.

Steve, 11:47 PM
I designed the electronics for that

Steve, 11:47 PM
and that will also be a huge money maker

micky, 11:47 PM
good.

Steve, 11:47 PM
but, that's for a later discussion.

micky, 11:47 PM
yes.

Steve, 11:50 PM
I'll be perfectly honest about my situation with you Milos; The owner for the company Weigh Point Inc. is 85yrs old and has nobody to give the company to after he dies. I've known him for years and has said he'll give it to me in the next year or so... But in the meantime, the old man needs purpose so he's still running it. He's been in business for 50 years but only doing small stuff because he's not a very good business man... but he is a good mad scientist and he pattented scales (load cellls) embedded in forks that can easily slide on existing forklift carriages.

Steve, 11:51 PM
That said, he lives in technological world of the 1980s and early 90s and I have landed the company the biggest fish they've ever had with this client who loves the scales, but needs modern tech integration.

Steve, 11:52 PM
So, I"m basically funding this out of my own pocket for the moment, and once the big PO comes through, I'll be taking the profit to buy the company and run it.

Steve, 11:54 PM
Frankly, I just need to get this pilot for the client done, so they can run with it for about 30 days and prove out the concept. I have a great relationship with the VP there and have weekly progress meetings with them on the project and they are super excited, because as simple as this sounds, there is nothing like this out on the market.

micky, 11:54 PM
good.

Steve, 11:54 PM
And the product is marked as "Legal for Trade" which is a government certification that not many company's have and must exist for businesses to bill based on weight.

micky, 11:55 PM
ok.

micky, 11:56 PM
I'll have done for you asap.

Steve, 11:56 PM
And, I have a guy from China I found on freelancer who will charge me $500USD to get this done in 7 days. BUT... his English is quite bad, doesn't communicate very well, and welll.... not to sound racist... but there are MANY intellectual property issues when dealing with China.

micky, 11:57 PM
right...

Steve, 11:57 PM
Andy, my wife said most Serbian men are kinda scared of Serbian women... so I also that insurance policy!! :-p

micky, 11:58 PM
:)

Steve, 11:58 PM
All joking aside... I want a development partner whom we can share success.

micky, 11:58 PM
Are you working at office now?

Steve, 11:59 PM
I'm going to send you a document from the client which I have not shared with anybody else that includes their confidential business flow which will give you context of how our project will fit into their operating procedure

micky, 11:59 PM
ok.

Steve, 11:59 PM
Working from home

Steve, 12:00 AM
So - the value proposition for the client is that their freight clients nearly always under declare the weight of their freight

Steve, 12:00 AM
and they want to re-weigh the freight and bill for it

Steve, 12:00 AM
this is where our tech comes in

micky, 12:01 AM
ok.

micky, 12:01 AM
so are you always available on discussing here?

Steve, 12:02 AM
Always

Steve, 12:03 AM
I just emailed you the API docs

micky, 12:03 AM
ok.

micky, 12:03 AM
Yes, received.

Steve, 12:03 AM
I'll set you up with a PPTP VPN account so you can jump on the RPI whenever you want

micky, 12:04 AM
ok.

micky, 12:04 AM
thanks.

Steve, 12:04 AM
Have a review of the docs I sent you and the code and then we can further discuss

micky, 12:05 AM
ok.

micky, 12:05 AM
How about your estimate budget for this project?

Steve, 12:07 AM
Like I said, I'm paying out of my own pocket, have a kid on the way, and am moving to the country-side next week, so.... as little as possible while of course being fair to your time... but, I want somebody also invested in the future of this project, which I know will bring major $$ and like I said... I take care of those that take care of me. So, I invite you to give me a quote on this.

micky, 12:09 AM
ok.

micky, 12:09 AM
Let's discuss in detail after checking codes.

Steve, 12:09 AM
Sounds good.

Steve, 12:10 AM
Also, on the XD: in the Settings (gear icon), I won't need most of those setup parameters.. they will be for v4.

Steve, 12:10 AM
(This is v2 - Customized)

micky, 12:10 AM
got it.

Steve, 12:11 AM
I'll be awake for the next 4-5hrs... I am GMT-5.

Steve, 12:12 AM
If you want to sleep on it (it's late in Serbia)... drop me a line your tommorow morning :-)

micky, 12:12 AM
yes, here is midnight, and I'm off to bed now.

Steve, 12:13 AM
Laku nocÃÅ!

micky, 12:13 AM
I'll ping you on Sunday morning in your time.

micky, 12:13 AM
but asap. ok?

Steve, 12:14 AM
Thank you! I have a good feeling about this :-)

micky, 12:14 AM
Thanks for your kindness.

Steve, 12:15 AM
Good people dealing with good people bring great results!

Steve, 12:15 AM
It's important to me with whomever I deal with has the best of intentions towards the world and all it's inhabitants.....

micky, 12:16 AM
Perfect.

micky, 12:16 AM
Good day!

Steve, 12:16 AM
Laku nocÃÅ! :-)

Steve, 12:17 AM
ttyl

Steve, 7:36 PM
Dobro veƒçe!

Steve, 7:36 PM
Kako si?

micky, 10:04 PM
HEllo. Steve.

micky, 10:04 PM
How are you?

Steve, 10:04 PM
Hi Milos.

Steve, 10:05 PM
Busy as anything, but everyday above ground is a good one :-)

Steve, 10:05 PM
Have you reviewed what I sent you and thought about the project?

micky, 10:19 PM
busy day.

micky, 10:19 PM
I've checked.

micky, 10:26 PM
would you like to work here, or freelancer?

Steve, 10:27 PM
I'd prefer here. The freelancer platform sucks for proper collaboration and I'm gonna have a super busy week ahead with limited computer access so Skype is a much better solution.

Steve, 10:27 PM
So, after reviewing everything, how confident are you in terms of timeframe?

micky, 10:34 PM
yes, I'm confident about your project.

micky, 10:34 PM
and two weeks.

Steve, 10:37 PM
cost estimate?

micky, 10:39 PM
600USD

Steve, 10:42 PM
Done.

Steve, 10:43 PM
I will also number the nodes in the DFD and make a corresponding document that cites each node # and provides further detail which will include UI screenshots.

Steve, 10:44 PM
You're giving me an excellent price for a Western developer and you have my sincere gratitude. I will also do everything I can to make your job as easy as possible.

Steve, 10:44 PM
Can I pay you half right now?

Steve, 10:45 PM
Paypal, Interact email, Western Union.... your choice.

micky, 10:45 PM
paypal is ok.

micky, 10:46 PM
mickytwenty@outlook.com

Steve, 10:47 PM
Dubravka (my wife) is excited I'm doing business with a fellow Serb when I just told her!

micky, 10:48 PM
:)

Steve, 10:48 PM
You also have my word that when the real $$$ start rolling in that we will both do very well. I take care of the people that take care of me.

micky, 10:48 PM
pleasure.

Steve, 10:52 PM
I'll send you a product roadmap of what I have in mind for this... it's very exciting and nobody else out there is doing it.

micky, 10:52 PM
ok, thanks.

Steve, 10:53 PM
In the meantime.......

Steve, 10:54 PM
I'll send email you a document for VPN access. You can PPTP VPN into my infrastructure and have full network access to the RPI.

micky, 10:54 PM
ok.

Steve, 10:54 PM
It also has instructions how to establish the IPSEC VPN tunnel to the client....

Steve, 10:55 PM
I don't remember - did we go through that yesterday?

micky, 10:55 PM
yes

Steve, 10:55 PM
cool.

Steve, 10:57 PM
As a starting point, if you can please do some basic testing of their API from the RPI using curl and the API document I emailed to you, that would be great because they are waiting for feedback that we have everything we need from their API. This testing is a project milestone that I want to be able to provide an update on to say it was done. Do you think you might be able to do this Monday or Tuesday? After that I'll leave you alone to do your thing.

micky, 10:58 PM
Monday, tomorrow.

Steve, 11:01 PM
perfect!

Steve, 11:04 PM
ok... it's getting late there. I'll leave you alone.... for now! :-p

micky, 11:04 PM
:D

Steve, 11:04 PM
You should have what you need in your inbox when you wake up tommorow morning.

micky, 11:04 PM
ok. good.

Steve, 11:05 PM
I remain available whenever you need anything. In the meantime, have a great evening! :-)

micky, 11:05 PM
Thanks.
Have a nice day!!

Steve, 3:54 AM
Your VPN password:

Steve, 3:54 AM
Jfw8J@pd

Steve, 4:02 AM
Updated XD Link with exportable assets, color codes, font names, etc.... :

Steve, 4:02 AM
https://xd.adobe.com/view/6f4bdf25-d502-4790-9dfc-0a125381411d-3a18/

Steve, 4:04 AM
I didn't get a chance to annotate the DFD and finish the accompanying document, but I'm sure you have enough for now until I complete that in the next day or so.

Steve, 4:04 AM
btw... Good Morning! :-)

Steve, 4:04 AM
I emailed you all the VPN and connection instructions.

Steve, 4:20 AM
one change from the doc: the password for both the pi and root account is:

Steve, 4:20 AM
shlivo



=========================================
Mail from Client
=========================================
Hi Steve,

 

I wanted to follow up to ensure you have the API details you need in order to move forward on the TruckMate integration.  If you have any questions or see anything that I may have omitted please let me know so that I can adjust accordingly. There will be a single POST endpoint which you will need to contact to publish the information for TruckMate, the URL of it will be in the format 'BASEURL/api/FreightBillWeight', and the payloads shown would be with a content-type of application/json. 

 

A couple of notes on the data elements:

TerminalId would be an internal identifier of yours for the specific unit which is doing the weight measurement primarily for troubleshooting or attribution down the line.  If you have a preferred identifier in a UUID or String format, i can change the type for this
ActiveUser would be the user currently logged into your terminal if that's something you record or if logging in is even a process. 
WeightApplication is an enumeration that indicates how the provided scans were used, these are the values and their meanings:  0 - Weight not applied to anything, 1 - Applied based on an entire Freight Bill, 2 - Applied based on a set of Item barcodes, 3 - Updates deferred until additional barcodes scanned for the bill
 

Below I will go through a number of Request and Responses for the different scenarios that may be encountered:

 

Scenario #1, 1 or more item barcodes are provided, and this is all the barcodes related to a given Freight Bill:

Request

{
    "Barcodes": ["T00001-0001", "T00001-0002"],
    "ScanTime": "2/20/2020 9:56:16 AM",
    "Weight": 354,
    "TerminalId": 2,
    "ActiveUser": "LoggedinUser"

},

 

Response (HTTP Status: 200)

{

   "IsSuccess": true,

   "BillNumber": "T00001",

   "WeightApplication", 2

}

 

Scenario #2, 1 or more barcodes are provided, but they belong to multiple Freight Bills:

Request

{
    "Barcodes": ["T00001-0001", "T00002-0001"],
    "ScanTime": "2/20/2020 9:56:16 AM",
    "Weight": 354,
    "TerminalId": 2,
    "ActiveUser": "LoggedinUser"

},

 

Response (HTTP Status: 400)

{

   "IsSuccess": false,

   "ErrorMessage": "Cannot apply Weight to multiple Freight Bills",

   "WeightApplication", 0

}

 

Scenario #3, 1 or more barcodes are provided for one Freight Bill but there are still additional barcodes for that bill which are not yet scanned

Request

{
    "Barcodes": ["T00001-0001", "T00001-0002"],
    "ScanTime": "2/20/2020 9:56:16 AM",
    "Weight": 354,
    "TerminalId": 2,
    "ActiveUser": "LoggedinUser"

},

 

Response (HTTP Status: 200)

{

   "IsSuccess": true,

   "BillNumber": "T00001",

   "WeightApplication", 3

}

 

 

Scenario #4, 1 barcode is provided for one Freight Bill, but this barcode is the Bill Number itself, not an item barcode

Request

{
    "Barcodes": ["T00001"],
    "ScanTime": "2/20/2020 9:56:16 AM",
    "Weight": 354,
    "TerminalId": 2,
    "ActiveUser": "LoggedinUser"

},

 

Response (HTTP Status: 200)

{

   "IsSuccess": true,

   "BillNumber": "T00001",

   "WeightApplication", 1

}

 

Please feel free to follow up on any questions that you might have.

 

Regards,



===========
Mail
===========

Subject: API for TruckMate integration

 

Hi Steve,

 

I got the opportunity to run through some tests yesterday to ensure that everything is working the way I expected at M-O, and I want to make sure you have whatever you need for testing as I'll be out of the office for a week starting this Friday.

 

I've attached a Postman collection with a number of the scenarios we've talked about in our previous discussions, so this should give you complete requests that behave how we're expecting to work back from.

 

There are two Success cases that you're going to see in the collection, one which represents a case where all barcodes are provided for the bill, and it's recorded right away, and a second case where a barcode is missing in the initial request, and so the update is deferred until the remaining barcodes are submitted.

 

There are also 5 failure cases which are included in the list of examples, and they represent the following rule violations:

Instead of an Item Barcode, a Barcode with the Freight Bill number was supplied
A barcode supplied is not a Valid Barcode or Alternate Barcode value within TruckMate
The scan provided is missing one of the required properties (Forklift ID)
The scan provided is missing one of the required properties (Unit of Measure)
The scan contains barcodes which belong to multiple separate freight bills
The other note I wanted to bring up is that this endpoint is configured to use HTTP Basic Authorization, and to support that, the API has been configured to accept a particular User Password pair which is saved into the attached Postman collection.   If you would like me to send them seperately for reference, just let me know and I'd be happy to send them across.

 

Regards,

Jordan


================
Mail to Milos
================
Good Morning Milos!

 

Please see the attached instructions to VPN into my infrastructure and then once on the RPI to VPN to the client.  The document is pretty self-explanatory, but as always, if you have any questions, please don‚Äôt hesitate to reach out.

 

As discussed, it would be great if you could do a basic API functionality test and replicate the test results I provided you via the email I previously sent you with the API documentation and .JSON attachment.  Please let me know the results when you have them so I can update the client.

 

I‚Äôll send you the VPN password on Skype.

 

Talk soon! üòä